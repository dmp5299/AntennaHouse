@using System.Windows;
@using System.Web.UI.WebControls;
@model AntennaHousePdf.Models.AntennaPdf
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <!--
    <link rel="stylesheet" type="text/css" href="~/Content/StyleSheet1.css" />-->
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <!--
    <link href="~/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" />
    <script src="~/bootstrap/js/bootstrap.min.js"></script>-->
    <script src="~/jquery/jquery-3.1.1.min.js"></script>
    <!--
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.js"></script>-->
    <script src="~/jquery/jquery-ui.js"></script>
    <link rel="stylesheet" href="~/jquery/jquery-ui.css">
    <link rel="shortcut icon" type="image/x-icon" href="~/icons/rcmIcon.ico" />

    <title>AntennaHouse</title>
</head>
<body>
    <div class="panel panel-success">
        <div class="panel-heading text-center"><h4>Antennahouse Pdf Creation</h4></div> <div class="panel-body">
            <div style="text-align:center">
                <image src="~/images/RCMTLogo.jpg" height="160px" width="600px" />
            </div>

            <div style="width:30%;margin: 0 auto; ">

                @using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data", onsubmit = "return checkFiles()" }
            ))
                {
                    @Html.ValidationSummary()
                    var styleSheets = AntennaHousePdf.Models.AntennaPdf.getProjects();
                    //project dropdown
                    <div class="form-group">
                        <label style="text-align:left;width:70%;padding-top:.2in;;display:block">Project</label>
                        @Html.DropDownListFor(model => model.Project, styleSheets, new { @style = "width:100%;", onchange = "change_project(this)", id = "baseProject" })
                    </div>

                    //subproject
                    <div class="form-group" style="display:none" id="CMMproject">
                        <label style="text-align:left;width:70%;display:block">CMM Type</label>
                        @Html.DropDownListFor(model => model.SubProject, AntennaHousePdf.Models.AntennaPdf.getSubProjects("CMM"), new { @style = "width:100%;" })
                    </div>

                    //subproject
                    <div class="form-group" style="display:none" id="Rolls Royceproject">
                        <label style="text-align:left;width:70%;display:block">Volume</label>
                        @Html.DropDownListFor(model => model.Volume, AntennaHousePdf.Models.AntennaPdf.getSubProjects("Rolls Royce"), new { @style = "width:100%;" })
                    </div>

                    //subproject
                    <div class="form-group" id="SBProject">
                        <label style="text-align:left;width:70%;display:block">SB Type</label>
                        @Html.DropDownListFor(model => model.SubProjectSB, AntennaHousePdf.Models.AntennaPdf.getSubProjects("SB"), new { @style = "width:100%;" })
                    </div>

                    //upload xml files
                    <div class="form-group">
                        <label style="text-align:left;width:70%">Upload Files</label>
                        @Html.TextBoxFor(m => m.XmlFiles, new
                       {
                           type = "file",
                           name = "file",
                           style = "width:100%;padding-after:.1in",
                           id = "sbXml",
                           accept = ".xml",
                           multiple = "multiple"
                       })
                    </div>
                    //upload graphics for pdf
                    <div class="form-group">
                        <label style="text-align:left;width:70%">Upload Graphics</label>
                        @Html.TextBoxFor(m => m.Graphics, new
                       {
                           type = "file",
                           name = "file",
                           style = "width:100%",
                           accept = ".cgm, .jpg, .tif, .png",
                           multiple = "multiple"
                       })
                    </div>
                        <div class="text-center" style="padding-bottom:.2in">
                            <input class="btn btn-success" type="submit" value="Build PDF" />
                        </div>
                        <div id="progressbar"></div>
                }
            </div>
            <script>
                window.onload = function (e) {
                    project = document.getElementById("baseProject");
                    if (project.options[project.selectedIndex].value=="CMM") {
                        document.getElementById("CMMproject").style.display = "block";
                    }
                    else if (project.options[project.selectedIndex].value == "Rolls Royce") {
                        document.getElementById("Rolls Royceproject").style.display = "block";
                    }
                    else if (project.options[project.selectedIndex].value == "SB") {
                        document.getElementById("SBproject").style.display = "block";
                    }
                }

                function checkFiles(){
                    var filePath=document.getElementById('sbXml').value;
                    if(filePath.length<1)
                    {
                        alert("Select one or more xml files");
                        return false;
                    }
                }

                function change_project(project)
                {
                    if (project.options[project.selectedIndex].value == "CMM")
                    {
                        alert("gere");
                        document.getElementById(project.options[project.selectedIndex].value + "project").style.display = 'block';
                        document.getElementById("Rolls Royceproject").style.display = 'none';
                        document.getElementById("SBProject").style.display = 'none';
                    }
                    else if (project.options[project.selectedIndex].value == "Rolls Royce")
                    {
                        document.getElementById(project.options[project.selectedIndex].value + "project").style.display = 'block';
                        document.getElementById("CMMproject").style.display = 'none';
                        document.getElementById("SBProject").style.display = 'none';
                    }
                    else if (project.options[project.selectedIndex].value == "SB") {
                        document.getElementById(project.options[project.selectedIndex].value + "Project").style.display = 'block';
                        document.getElementById("Rolls Royceproject").style.display = 'none';
                        document.getElementById("CMMproject").style.display = 'none';
                    }
                }
            </script>
        </div>
    </div>
</body>
</html>










